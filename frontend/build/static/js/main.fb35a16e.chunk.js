(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{118:function(e,t,n){},124:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),s=n(30),i=n.n(s),l=(n(118),n(73),n(50)),d=n(16),o=n(44),j=n(61),b=j.b.div(a||(a=Object(o.a)(["\n\n    background-color: #282c34;\n    min-height: 100vh;\n    width: 100vw;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    flex: 1;\n    color: white;\n\n"]))),m=n(10),u=n(180),h=n(178),p=n(187),O=n(186),x=n(78),f=n.n(x),v=n(98);function g(){return(g=Object(v.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json"}});case 2:if(200===(a=e.sent).status||201===a.status){e.next=6;break}throw console.log(a),new Error("Query illegal or could not connect to database!");case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y="".concat("http://it2810-43.idi.ntnu.no",":").concat("3001","/graphql"),N=function(e,t){return g.apply(this,arguments)},w=n(58),S=w.c,_=n(67),C=Object(_.b)({name:"grabber",initialState:{visited:[]},reducers:{addPerson:function(e,t){e.visited.indexOf(t.payload)<0&&(e.visited.length<12||e.visited.shift(),e.visited.push(t.payload))}}}),P=C.actions.addPerson,k=C.reducer,A=(n(124),n(1));function q(e){var t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),c=t.getMonth()-n.getMonth();return(c<0||0===c&&t.getDate()<n.getDate())&&a--,a}var F=function(e){var t=Object(w.b)(),n=Object(c.useState)(!1),a=Object(m.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(m.a)(i,2),d=l[0],o=l[1],j=Object(c.useState)(),b=Object(m.a)(j,2),u=b[0],h=b[1],O=function(){return"Male"===e.gender?"https://cdn-icons-png.flaticon.com/512/1536/1536865.png":"Female"===e.gender?"https://cdn-icons-png.flaticon.com/512/1536/1536867.png":"https://cdn-icons-png.flaticon.com/512/1536/1536870.png"};return Object(c.useEffect)((function(){var e=function(e){d&&o(!1)};return document.addEventListener("mouseup",e,!0),function(){document.removeEventListener("mouseup",e,!0)}}),[d,r]),Object(A.jsx)("div",{className:"profile-card ".concat(d?"open-container":"closed-container"),onClick:function(){d||(t(P(e.name)),function(){var t={query:'\n                query {\n                    person (search:  [{value: "'.concat(e._id,'", field:"_id"}]) {\n                        bio\n                        email\n                        cars {\n                            name\n                            price\n                        }\n                    }\n                }\n            ')};N(t,y).then((function(e){h(e.data.person)}))}(),o(!0))},onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:d?Object(A.jsxs)("div",{className:"open",children:[Object(A.jsx)(p.a,{sx:{display:"flex",justifyContent:"center",p:2},children:Object(A.jsx)("img",{className:"card-img-top",src:O(),alt:""})}),Object(A.jsxs)("div",{className:"card-body",children:[Object(A.jsx)("h6",{className:"card-title",style:{fontSize:"20px"},children:e.name}),Object(A.jsxs)("p",{className:"card-text",children:[Object(A.jsx)("b",{children:"Age:"})," ",q(e.birthdate)]}),Object(A.jsxs)("p",{className:"card-text",children:[Object(A.jsx)("b",{children:"Gender:"})," ",e.gender]}),Object(A.jsxs)("p",{children:[Object(A.jsx)("b",{children:"Id:"})," ",e._id]}),Object(A.jsxs)("p",{children:[Object(A.jsx)("b",{children:"Email:"})," ",u&&u.email]}),Object(A.jsxs)("p",{children:[Object(A.jsx)("b",{children:"About:"})," ",u&&u.bio]}),u&&u.cars.length>0&&Object(A.jsxs)("div",{children:[Object(A.jsx)("p",{children:Object(A.jsx)("b",{children:"Cars:"})}),Object(A.jsx)("table",{children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"Name:"}),Object(A.jsx)("td",{children:"Price:"})]}),u&&u.cars.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e.name}),Object(A.jsx)("td",{children:e.price})]},e.name)}))]})})]})]})]}):Object(A.jsxs)("header",{className:"closed",children:[Object(A.jsx)("img",{className:"card-img-top",src:O(),alt:""}),Object(A.jsxs)("div",{className:"card-body",children:[Object(A.jsx)("h1",{className:"card-title",style:{fontSize:"20px"},children:e.name}),Object(A.jsxs)("p",{className:"card-text",children:[Object(A.jsx)("b",{children:"Age:"})," ",q(e.birthdate)]}),Object(A.jsxs)("p",{className:"card-text",children:[Object(A.jsx)("b",{children:"Gender:"})," ",e.gender]})]})]})})},z=n(100),D=n.n(z),I=n(101),E=n.n(I),M=n(183),L=n(190),Y=n(184),T=n(179),G=n(182),B=n(192),V=n(193),W=n(103),Z=Object(W.a)({palette:{mode:"dark",primary:{main:"#a7d5fa"}},typography:{fontSize:15}}),J=Object(W.a)({palette:{mode:"light",primary:{main:"#63D471"}},typography:{fontSize:15}}),Q=n(27),$=n(173);var H=function(e){var t=Object(Q.a)(),n=Object($.a)(t.breakpoints.up("sm"));return Object(A.jsx)("div",{className:"options-bar",children:Object(A.jsx)(O.a,{theme:Z,children:Object(A.jsxs)(p.a,{sx:{display:"flex",flexFlow:"row wrap",justifyContent:"center",alignItems:"center",gap:"10px",p:2,borderColor:"white"},children:[Object(A.jsx)(p.a,{children:Object(A.jsx)(M.a,{id:"filled-basic",label:"Search",variant:"filled",onChange:function(t){return e.setSearch(t.target.value)},size:n?"small":"medium"})}),Object(A.jsx)(p.a,{children:Object(A.jsxs)(L.a,{variant:"filled",sx:{color:"third"},children:[Object(A.jsx)(Y.a,{children:"Search on:"}),Object(A.jsxs)(T.a,{labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:e.searchOption,onChange:function(t){e.setSearchOption(t.target.value)},autoWidth:!0,label:"Age",children:[Object(A.jsx)(G.a,{value:"first_name",children:"First name"}),Object(A.jsx)(G.a,{value:"last_name",children:"Last name"}),Object(A.jsx)(G.a,{value:"_id",children:"Person Id"})]})]})}),Object(A.jsx)(p.a,{sx:{p:1},children:Object(A.jsxs)(L.a,{variant:"filled",children:[Object(A.jsx)(Y.a,{children:"Set gender"}),Object(A.jsxs)(T.a,{labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:e.gender,onChange:function(t){e.setGender(t.target.value)},autoWidth:!0,label:"Age",children:[Object(A.jsx)(G.a,{value:"All",children:"All genders"}),e.genders&&e.genders.map((function(e){return Object(A.jsx)(G.a,{value:e,children:e},e)}))]})]})}),Object(A.jsx)(p.a,{children:Object(A.jsx)(B.a,{variant:"contained",onClick:function(){return e.handleSearch(!0)},size:n?"small":"medium",children:"Search"})}),Object(A.jsx)(p.a,{children:Object(A.jsx)(V.a,{color:"primary","aria-label":"Sort decending",size:"large",onClick:function(){e.setSort("asc"===e.sort?"desc":"asc")},children:"desc"===e.sort?Object(A.jsx)(D.a,{}):Object(A.jsx)(E.a,{})})})]})})})};var K=function(){var e=Object(c.useState)(10),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("desc"),s=Object(m.a)(r,2),i=s[0],l=s[1],d=Object(c.useState)(""),o=Object(m.a)(d,2),j=o[0],b=o[1],x=Object(c.useState)("first_name"),f=Object(m.a)(x,2),v=f[0],g=f[1],w=Object(c.useState)([]),S=Object(m.a)(w,2),_=S[0],C=S[1],P=Object(c.useState)("All"),k=Object(m.a)(P,2),q=k[0],z=k[1],D=Object(c.useState)(1),I=Object(m.a)(D,2),E=I[0],M=I[1],L=Object(c.useState)(),Y=Object(m.a)(L,2),T=Y[0],G=Y[1],B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&M(1);var t={query:"\n                query {\n                    people(page:".concat(E,', search: [{value: "').concat(j,'", field:"').concat(v,'"}, {value: "').concat(q,'", field: "').concat("All"===q?"":"gender",'"}], sort: {value: "').concat(i,'", field: "birthdate"}) {\n                        _id\n                        first_name\n                        last_name\n                        birthdate\n                        gender\n                    }\n                }\n            ')};N(t,y).then((function(e){G(e.data.people)})).catch((function(e){console.log(e)})),t={query:'\n                query {\n                    generalPeopleInfo(search: [{value: "'.concat(j,'", field:"').concat(v,'"}, {value: "').concat(q,'", field: "').concat("All"===q?"":"gender",'"}]) {\n                        size\n                    }\n                }\n            ')},N(t,y).then((function(e){a(Math.ceil(e.data.generalPeopleInfo.size/20))})).catch((function(e){console.log(e)}))};Object(c.useEffect)((function(){N({query:'\n            query {\n                generalPeopleInfo(distinct: "gender") {\n                    distinct\n                }\n            }\n            '},y).then((function(e){C(e.data.generalPeopleInfo.distinct)})).catch((function(e){alert(e)}))}),[]),Object(c.useEffect)((function(){B(),window.scrollTo(0,0)}),[E,i]);var V=Object(Q.a)(),W=Object($.a)(V.breakpoints.up("sm"));return Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(H,{setSearch:b,handleSearch:B,setSearchOption:g,setGender:z,gender:q,genders:_,searchOption:v,sort:i,setSort:l}),Object(A.jsx)(p.a,{sx:{display:"flex",justifyContent:"center",p:1,flexFlow:"row wrap"},children:T&&T.map((function(e){return Object(A.jsx)(F,{_id:e._id,name:e.first_name+" "+e.last_name,birthdate:e.birthdate,gender:e.gender},e._id)}))}),Object(A.jsx)(p.a,{sx:{display:"flex",justifyContent:"center",p:1},children:Object(A.jsx)(p.a,{children:Object(A.jsx)(h.a,{spacing:4,children:Object(A.jsx)(O.a,{theme:Z,children:Object(A.jsx)(u.a,{count:n,page:E,onChange:function(e,t){M(t)},variant:"outlined",shape:"rounded",color:"secondary",size:W?"large":"small"})})})})})]})},R=n(4),U=n(49),X={first_name:"",last_name:"",email:"",birthdate:"",gender:"Male",bio:""};var ee=function(){var e=Object(c.useState)(X),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(m.a)(r,2),i=s[0],l=s[1],d=Object(c.useState)(["Male","Female"]),o=Object(m.a)(d,2),j=o[0],b=o[1];Object(c.useEffect)((function(){N({query:'\n          query {\n              generalPeopleInfo(distinct: "gender") {\n                  distinct\n              }\n          }\n      '},y).then((function(e){b(e.data.generalPeopleInfo.distinct)}))}),[]);var u=function(e){a(Object(U.a)(Object(U.a)({},n),{},Object(R.a)({},e.target.name,e.target.value)))};return Object(A.jsxs)("form",{className:"needs-validation",noValidate:!0,onSubmit:function(e){var t=document.querySelectorAll(".needs-validation");e.preventDefault(),Array.prototype.slice.call(t).forEach((function(t){if(t.checkValidity()){var c={query:'\n                mutation {\n                  createPerson(data: {\n                    first_name: "'.concat(n.first_name,'"\n                    last_name: "').concat(n.last_name,'"\n                    email: "').concat(n.email,'"\n                    birthdate: "').concat(n.birthdate,'"\n                    gender: "').concat(n.gender,'"\n                    bio: "').concat(n.bio,'"\n                  }) {\n                    _id\n                    first_name\n                  }\n                }\n              ')};N(c,y).then((function(e){a(X),l(e.data.createPerson._id)})).catch((function(e){alert(e)}))}else t.classList.add("was-validated"),e.stopPropagation()}),!1)},style:{textAlign:"center"},children:[Object(A.jsxs)("h3",{children:["Add a new person ",Object(A.jsx)("span",{className:"label label-default"})]}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.first_name,type:"text",pattern:"[a-zA-Z\xe6\xf8\xe5\xc6\xd8\xc5\xf6\xd6\xc4\xe4\xeb\xcb]{2,20}",className:"form-control mt-3",required:!0,placeholder:"First Name",name:"first_name",onChange:u})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid first name"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.last_name,type:"text",pattern:"[a-zA-Z\xe6\xf8\xe5\xc6\xd8\xc5\xf6\xd6\xc4\xe4\xeb\xcb]{2,20}",className:"form-control mt-3",required:!0,placeholder:"Last Name",name:"last_name",onChange:u})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid last name"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.email,type:"text",pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",className:"form-control mt-3",required:!0,placeholder:"Email adress",name:"email",onChange:u})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid email"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.birthdate,type:"date",required:!0,max:(new Date).toISOString().split("T")[0],className:"form-control mt-3",placeholder:"Date of birth",name:"birthdate",onChange:u})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid date"}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsxs)("select",{value:n.gender,className:"form-select mt-3",name:"gender",onChange:u,children:[Object(A.jsx)("option",{disabled:!0,value:"",children:"Gender"}),j&&j.map((function(e){return Object(A.jsx)("option",{value:e,children:e},e)}))]})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please select a gender"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("textarea",{value:n.bio,required:!0,className:"form-control mt-3",placeholder:"Biography",name:"bio",onChange:u})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Bio cant be empty"}),Object(A.jsx)("button",{type:"submit",id:"submit",className:"btn btn-primary mt-3 mx-3",children:"Add Person"}),i&&Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"alert alert-success alert-dismissible d-flex align-items-center fade show mt-3",children:[Object(A.jsx)("i",{className:"bi-check-circle-fill"}),Object(A.jsx)("strong",{className:"mx-2",children:"Success!"})," New person id: ",Object(A.jsx)("br",{})," ",i]})})]})},te={name:"",company:"",production_year:NaN,price:NaN,owner:""};var ne=function(){var e=Object(c.useState)(te),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(m.a)(r,2),i=s[0],l=s[1],d=function(e){a(Object(U.a)(Object(U.a)({},n),{},Object(R.a)({},e.target.name,e.target.value)))};return Object(A.jsxs)("form",{onSubmit:function(e){var t=document.querySelectorAll(".needs-validation");e.preventDefault(),Array.prototype.slice.call(t).forEach((function(t){if(t.checkValidity()){var c={query:'\n                mutation {\n                  createCar(data: {\n                    name: "'.concat(n.name,'"\n                    company: "').concat(n.company,'"\n                    production_year: ').concat(n.production_year,"\n                    price: ").concat(n.price,'\n                    owner: "').concat(n.owner,'"\n                  }) {\n                    _id\n                  }\n                }\n              ')};N(c,y).then((function(e){a(te),l(e.data.createCar._id)})).catch((function(e){alert("You need a valid persons id!")}))}else t.classList.add("was-validated"),e.stopPropagation()}),!1)},noValidate:!0,className:"needs-validation",style:{textAlign:"center"},children:[Object(A.jsxs)("h3",{children:["Add a new car ",Object(A.jsx)("span",{className:"label label-default"})]}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{id:"nameField",value:n.name,type:"text",required:!0,pattern:"[a-zA-Z0-9]{2,20}",className:"form-control mt-3",placeholder:"Car model",name:"name",onChange:d})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid car model"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.company,type:"text",required:!0,pattern:"[a-zA-Z0-9]{2,20}",className:"form-control mt-3",placeholder:"Manufactorer",name:"company",onChange:d})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Please pick a car manufactorer"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:isNaN(n.production_year)?"":n.production_year,type:"number",required:!0,pattern:"[0-9{4}]",min:"1900",max:"".concat(new Date(Date.now()).getFullYear()+1),className:"form-control mt-3",placeholder:"Production year",name:"production_year",onChange:d})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Production year on form YYYY"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:isNaN(n.price)?"":n.price,type:"number",required:!0,min:"0",className:"form-control mt-3",placeholder:"Price",name:"price",onChange:d})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Enter a valid price"}),Object(A.jsx)("div",{className:"col-md-12",children:Object(A.jsx)("input",{value:n.owner,type:"text",required:!0,className:"form-control mt-3",placeholder:"Owner ID",name:"owner",onChange:d})}),Object(A.jsx)("div",{className:"invalid-feedback",children:"Enter an owner id"}),Object(A.jsx)("button",{type:"submit",id:"submit",className:"btn btn-primary mt-3 mx-3",children:"Add car"}),i&&Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"alert alert-success alert-dismissible d-flex align-items-center fade show mt-3",children:[Object(A.jsx)("i",{className:"bi-check-circle-fill"}),Object(A.jsx)("strong",{className:"mx-2",children:"Success!"})," Car added to id: ",Object(A.jsx)("br",{})," ",i]})})]})},ae=n(194),ce=n(195),re=n(196),se=function(){return Object(A.jsx)(j.a,{theme:J,children:Object(A.jsx)(ae.a,{position:"static",sx:{bgcolor:"#63D471",display:"flex",flexFlow:"row wrap"},children:Object(A.jsx)(ce.a,{children:Object(A.jsxs)(re.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:"flex",flexFlow:"row wrap",justifyContent:"flex-start",alignItems:"flex-end",gap:"20px"},children:[Object(A.jsx)(l.b,{to:"/",style:{textDecoration:"none",color:"white",fontWeight:"bold",fontSize:"24px"},children:"Person grabber"}),Object(A.jsx)(l.b,{to:"/add-person",style:{textDecoration:"none",color:"white",fontSize:"20px"},children:"Add person"}),Object(A.jsx)(l.b,{to:"/add-car",style:{textDecoration:"none",color:"white",fontSize:"20px"},children:"Add car"})]})})})})};n(129);var ie=function(){var e=S((function(e){return e.visited}));return Object(A.jsxs)("footer",{className:"footer",children:[Object(A.jsx)("h4",{children:"Clicked people history:"}),Object(A.jsx)("ul",{style:{columns:function(){switch(e.length){case 1:return 1;case 2:return 2;default:return e.length<7?3:4}}(),listStyleType:"none"},children:e&&e.map((function(e,t){return Object(A.jsx)("li",{children:e},"Person: ".concat(t))}))})]})},le=Object(_.a)({reducer:k});var de=function(){return Object(A.jsx)(w.a,{store:le,children:Object(A.jsxs)(l.a,{basename:"/",children:[Object(A.jsx)(se,{}),Object(A.jsx)(b,{children:Object(A.jsxs)(d.c,{children:[Object(A.jsx)(d.a,{path:"/",exact:!0,component:K}),Object(A.jsx)(d.a,{path:"/add-person",component:ee}),Object(A.jsx)(d.a,{path:"/add-car",component:ne})]})}),Object(A.jsx)(ie,{})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(de,{})}),document.getElementById("root")),oe()}},[[130,1,2]]]);
//# sourceMappingURL=main.fb35a16e.chunk.js.map